# 智能简历优化助手系统 - 项目需求文档

## 项目概述
基于现有的 MaaResource-main Markdown 简历制作项目,扩展智能简历优化助手功能。通过对话式交互修改简历,并实时同步到前端界面。采用 RAG + Agent + MCP 架构,Python 后端实现。

## 技术栈要求

### 前端
- 基于现有 React 项目 (MaaResource-main)
- 新增对话交互组件
- WebSocket 实时通信
- Markdown 实时渲染

### 后端
- Python 3.9+
- FastAPI (Web 框架)
- LangChain (Agent 框架)
- ChromaDB (向量数据库)
- WebSocket (实时通信)
- MCP (Model Context Protocol) SDK

## 项目目录结构

```
intelligent-resume-optimizer/
├── frontend/                          # 前端项目 (基于 MaaResource-main)
│   ├── public/
│   │   ├── index.html
│   │   ├── index.css
│   │   └── manifest.json
│   ├── src/
│   │   ├── App.js
│   │   ├── index.js
│   │   ├── components/
│   │   │   ├── Basic/
│   │   │   ├── Button/
│   │   │   ├── Dialog/
│   │   │   ├── Navbar/
│   │   │   └── Chat/                 # 新增: 对话组件
│   │   │       ├── ChatBox.js        # 聊天框
│   │   │       ├── MessageList.js    # 消息列表
│   │   │       ├── InputArea.js      # 输入区域
│   │   │       └── ScorePanel.js     # 评分面板
│   │   ├── layout/
│   │   │   ├── Resume.js
│   │   │   └── ChatLayout.js         # 新增: 聊天布局
│   │   ├── store/
│   │   │   ├── resume.js
│   │   │   └── chat.js               # 新增: 聊天状态管理
│   │   ├── services/
│   │   │   ├── websocket.js          # 新增: WebSocket 服务
│   │   │   └── api.js                # 新增: API 调用
│   │   └── utils/
│   ├── package.json
│   └── README.md
│
├── backend/                           # Python 后端
│   ├── app/
│   │   ├── __init__.py
│   │   ├── main.py                   # FastAPI 入口
│   │   ├── config.py                 # 配置文件
│   │   ├── api/                      # API 路由
│   │   │   ├── __init__.py
│   │   │   ├── websocket.py          # WebSocket 端点
│   │   │   ├── resume.py             # 简历相关 API
│   │   │   └── health.py             # 健康检查
│   │   ├── agents/                   # Agent 系统
│   │   │   ├── __init__.py
│   │   │   ├── coordinator.py        # MCP 协调器
│   │   │   ├── intent_agent.py       # 意图识别 Agent
│   │   │   ├── modifier_agent.py     # 简历修改 Agent
│   │   │   ├── evaluator_agent.py    # 评分 Agent
│   │   │   ├── search_agent.py       # 联网搜索 Agent
│   │   │   └── optimizer_agent.py    # 优化建议 Agent
│   │   ├── rag/                      # RAG 系统
│   │   │   ├── __init__.py
│   │   │   ├── vector_store.py       # 向量数据库管理
│   │   │   ├── embeddings.py         # 嵌入模型
│   │   │   ├── retriever.py          # 检索器
│   │   │   └── knowledge_base/       # 知识库
│   │   │       ├── industry_keywords.py    # 行业关键词库
│   │   │       ├── optimization_cases.py   # 优化案例库
│   │   │       └── excellent_resumes.py    # 优秀简历库
│   │   ├── mcp/                      # MCP 实现
│   │   │   ├── __init__.py
│   │   │   ├── context_manager.py    # 上下文管理
│   │   │   ├── protocol.py           # 协议定义
│   │   │   └── multi_agent_coordinator.py  # 多 Agent 协同
│   │   ├── models/                   # 数据模型
│   │   │   ├── __init__.py
│   │   │   ├── resume.py             # 简历模型
│   │   │   ├── message.py            # 消息模型
│   │   │   └── evaluation.py         # 评估模型
│   │   ├── services/                 # 业务逻辑
│   │   │   ├── __init__.py
│   │   │   ├── resume_parser.py      # 简历解析服务
│   │   │   ├── resume_generator.py   # 简历生成服务
│   │   │   ├── scoring_service.py    # 评分服务
│   │   │   └── search_service.py     # 搜索服务
│   │   └── utils/                    # 工具函数
│   │       ├── __init__.py
│   │       ├── markdown_utils.py     # Markdown 处理
│   │       ├── text_utils.py         # 文本处理
│   │       └── logger.py             # 日志工具
│   ├── data/                         # 数据目录
│   │   ├── knowledge_base/           # 知识库数据
│   │   │   ├── industry_keywords/   # 行业关键词
│   │   │   │   ├── tech.json
│   │   │   │   ├── finance.json
│   │   │   │   └── marketing.json
│   │   │   ├── optimization_cases/  # 优化案例
│   │   │   │   ├── before_after_1.json
│   │   │   │   └── before_after_2.json
│   │   │   └── excellent_resumes/   # 优秀简历
│   │   │       ├── senior_engineer.md
│   │   │       └── product_manager.md
│   │   └── vector_db/               # 向量数据库存储
│   ├── tests/                        # 测试
│   │   ├── __init__.py
│   │   ├── test_agents.py
│   │   ├── test_rag.py
│   │   └── test_mcp.py
│   ├── requirements.txt              # Python 依赖
│   ├── Dockerfile                    # Docker 配置
│   └── README.md
│
├── docker-compose.yml                # Docker Compose 配置
├── .env.example                      # 环境变量示例
├── .gitignore
└── README.md                         # 项目总文档
```

## 核心功能需求

### 1. RAG 系统

#### 1.1 知识库构建
- **行业关键词库**
  - 按行业分类（技术、金融、市场等）
  - 技能关键词、职位关键词、行业术语
  - 支持动态更新和扩展

- **优化案例库**
  - 存储前后对比案例
  - 包含优化理由和效果说明
  - 按优化类型分类（格式、内容、关键词等）

- **优秀简历库**
  - 高质量简历模板
  - 按职位和行业分类
  - 提取最佳实践模式

#### 1.2 检索功能
- 向量化存储和检索
- 相似度匹配
- 上下文感知检索

### 2. Agent 系统

#### 2.1 意图识别 Agent
- 识别用户意图类型：
  - 修改（增删改）
  - 增强（丰富内容）
  - 润色（语言优化）
  - 评估（打分分析）
  - 建议（优化建议）

#### 2.2 简历修改 Agent
- 实时解析用户指令
- 定位修改位置
- 执行修改操作
- 生成差异对比
- 实时同步到前端

#### 2.3 评分 Agent
- **完整性评分** (0-100)
  - 基本信息完整度
  - 工作经历完整度
  - 项目经验完整度
  
- **匹配度评分** (0-100)
  - 关键词匹配度
  - 行业相关性
  - 技能匹配度
  
- **吸引力评分** (0-100)
  - 语言表达质量
  - 亮点突出度
  - 格式规范性

#### 2.4 搜索 Agent
- 联网搜索相关信息
- 行业最新动态
- 技能热度分析
- 竞品简历分析

#### 2.5 优化建议 Agent
- 基于评分结果提供建议
- 参考优秀案例
- 个性化优化方案

### 3. MCP (Model Context Protocol)

#### 3.1 上下文管理
- 对话历史管理
- 简历版本管理
- 用户偏好记录
- 会话状态维护

#### 3.2 多 Agent 协同
- Agent 间通信协议
- 任务分发机制
- 结果聚合
- 优先级管理
- 冲突解决

### 4. 前端功能扩展

#### 4.1 对话界面
- 聊天窗口组件
- 消息气泡展示
- 打字动画效果
- 历史记录查看

#### 4.2 实时同步
- WebSocket 连接
- 简历实时更新
- 差异高亮显示
- 版本回退功能

#### 4.3 评分展示
- 三维评分雷达图
- 详细评分说明
- 改进建议列表
- 进度跟踪

## API 接口设计

### WebSocket 端点
```
ws://localhost:8000/ws/chat
```

### REST API
```
POST   /api/resume/upload          # 上传简历
GET    /api/resume/{id}            # 获取简历
PUT    /api/resume/{id}            # 更新简历
POST   /api/resume/evaluate        # 评估简历
GET    /api/suggestions            # 获取优化建议
POST   /api/search                 # 搜索相关信息
```

## 消息协议

### 客户端 -> 服务端
````json
{
  "type": "user_message",
  "content": "请帮我优化工作经历部分",
  "session_id": "uuid",
  "context": {
    "resume_id": "resume_uuid",
    "current_section": "experience"
  }
}
````

### 服务端 -> 客户端
````json
{
  "type": "assistant_message",
  "content": "我已经为您优化了工作经历,主要改进如下...",
  "data": {
    "updated_resume": "markdown_content",
    "diff": [...],
    "scores": {
      "completeness": 85,
      "relevance": 90,
      "attractiveness": 88
    }
  }
}
````

## 部署要求

### 开发环境
- Node.js 14+
- Python 3.9+
- Redis (用于会话管理)
- PostgreSQL (可选,存储用户数据)

### 生产环境
- Docker & Docker Compose
- 负载均衡
- SSL 证书
- 监控和日志

## 开发优先级

### Phase 1: 基础架构 (Week 1-2)
- 后端 FastAPI 框架搭建
- 前端对话组件开发
- WebSocket 通信建立
- 基本的简历解析和更新

### Phase 2: RAG 系统 (Week 3-4)
- 向量数据库集成
- 知识库数据准备
- 检索功能实现

### Phase 3: Agent 系统 (Week 5-6)
- 意图识别 Agent
- 简历修改 Agent
- 评分 Agent

### Phase 4: MCP & 高级功能 (Week 7-8)
- MCP 协调器实现
- 多 Agent 协同
- 搜索 Agent
- 优化建议 Agent

### Phase 5: 优化和测试 (Week 9-10)
- 性能优化
- 全面测试
- 文档完善
- 部署上线

## 技术选型建议

### LLM 模型
- 通义千问

### 向量数据库
- ChromaDB (开源,易用)

### Agent 框架
- LangChain
